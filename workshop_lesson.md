# Create and Host your own Website
Creating and hosting your own website can often be intimidating and inaccessible due to paywalls or inexperience with coding.

Sites like [SquareSpace](https://www.squarespace.com/pricing/) will charge you $144/year and sites like [GoDaddy](https://www.godaddy.com/websites/website-builder/plans-and-pricing) will charge you $72/year with pricey add-ons that should really just come with owning the website. Additionally, many of the features they do provide are functionally useless for those aiming to host something simple like a static portfolio website. For many, the only allure they offer is the professional look they can provide those with no knowledge of HTML.

For those willing to invest an extra hour of their time, there IS an easier and cheaper way that will give them full control over their website and its contents.

This workshop will cover using Hugo to generate professional-looking HTML content from easy-to-write yaml files and using GitHub + Google Domains to host your website content for only $0-12 per year! 

Students should come with their own laptop pre-installed with git. No prior knowledge required, but a basic understanding of Git will help.

Examples of deliverables possible through the methods taught here:

* [chrischoy.net](http://www.chrischoy.net)
* [uchicagowintercare.com](http://www.uchicagowintercare.com)
* [giveusyourpassword.com](http://www.giveusyourpassword.com)

**DISCLAIMER**: there are many, many, many ways to go about creating and hosting your own website outside of the ones mentioned here. What will be taught here is just what I've personally found to work well.

## Background

Broadly, hosting your own website requires 3 key elements:

1. **HTML and CSS files** that comprise the actual page content
2. **Server** to host those files on
3. **Domain Name** that will direct users to your site

The price you pay 3rd party sites is for them to bundle these elements up for you. We, however, will be keeping those parts separate to give us greater control and affordability. The parts will be handled as such:

1. **HTML and CSS files** will be either manually written or generated by **Hugo**, a free third-party software for generating website files from easy-to-edit yaml files.
2. **Server** hosting will be done by GitHub for free
3. **Domain Name** will be purchased through GoogleDomains

## Setting up the GitHub Repo

GitHub is a fantastic means for hosting code with good version control. Additionally, GitHub even supports hosting your own website files. For free, each account is given [[username]].github.io as a url they can host on.

Here, we'll create a repository with a simple index.html file to start with.

1. Create a new repository and name it specifically **_your username_.github.io**
2. Create new file and call it specifically **index.html**
3. Copy and Paste in the following code to your index file

```html
<!DOCTYPE html>
  <html>
    <head>
      <title>Home Page</title>
    </head>

    <body>
      <h1> Hello World! </h1>
      <h2> This is my very own website! </h2>
    </body>
</html>
```

4. Go to **_your username_.github.io** as if it were a website. You should see the content that we just created! (Note: it may take a bit for changes to propagate. If you visited the site recently, old website files may still be cached, so try opening the page in an incognito tab)

This is all very cool, and if you're satisfied with this, then you're already done! You now have a way to customize and host your own website at **$0/year**! 

However, what if you want to host multiple personal websites for cheap? Or what if you specifically want a cool domain name like [bobross.com](http://bobross.com)? Or what if you want a more professional looking website without getting into the nitty-gritty of writing your own thousand-line CSS files?

To do this, we'll want just our http files to be hosted on GitHub and our Domain name to be determined elsewhere. Before we get into doing this, let's take a quick detour into getting you your own domain name!

## Setting up your Domain Name

There are a lot of third-parties that sell domain names. My preferred provider is Google Domains because it's easy to use and provides additional resources like subdomain redirects and custom emails for free! The only downside is the cost. The cost being a very affordable $12/yr (*usually. popular domain names and domain names held by scalpers can cost a lot more*).

1. Go to domains.google.com
2. Navigate to "Get a new domain"
3. Find and purchase your very own domain!
4. Navigate to your home page that lists out your owned domain names.
5. Click on "Manage". Navigate to the sidebar and go to DNS > Custom Resource Records

![Image of Google Domains DNS Records location][dns_records]

6. Input your resource records. What these do is basically tell anyone who tries to access your domain name where to check for your website files. A tutorial for this can be found [here](https://help.github.com/en/articles/setting-up-an-apex-domain). Specifically, we're interested in the **A** records at the bottom.
7. Like in the above image, you should also add a CNAME record with your [[github username]].github.io.
8. Check that these records have been set up correctly using the following terminal command:

```bash
$ dig www.trentyang.com +nostats +nocomments +nocmd
```

9. Take some time to explore the functionality of Google domains. Try setting up a custom email address and subdomain redirect to your GitHub!


## Linking a GitHub Repo to a Custom Google Domain

Let's head back into GitHub and create a new repository that will hold the files for your new website.

1. Create a new repository. Name it whatever you want.
2. Add a CNAME file and put in the following text formatted to your domain name you just bought. The name you first list will be what is displayed in the browser url bar when anyone navigates to your site. For example, try going to [www.chrischoy.net](http://www.chrischoy.net). It will automatically drop the www and resolve to just "chrischoy.net"

```
chrischoy.net  
www.chrischoy.net  
```

3. Go to the respository Settings > Options > GitHub Pages

~[Image of GitHub Pages section in Repo Settings][github pages]

4. Change the custom domain to your website domain name (eg. chrischoy.net).
5. Change the source to "gh-pages branch"
6. Clone your repository to your computer.

**Note**: at this point, you have the ability to write your own website content and host it on your own custom domain. Just follow only steps 1-4 of this tutorial part and add an index.html file.

## Using Hugo

There are a lot of ways to generate professional looking website pages. You could code your own from scratch, use a third-party interface (like [Wordpress](https://wordpress.com/)), or use a static-site generator (like [Jekyll](https://jekyllrb.com/)). For our purposes, we'll be using the free and easy-to-use static-site generator, [Hugo](https://gohugo.io/). I say easy-to-use because of the way it plays nicely with GitHub and the way it requires little-to-no HTML knowledge.

So, let's get into it and follow Hugo's quickstart tutorial: [Hugo's Quick Start Page](https://gohugo.io/getting-started/quick-start/)

3. Add a "publish.sh" file and paste in the following script. This will be helpful later.

```
#!/bin/sh

# publish.sh
# Generates site using Hugo compiler then pushes it to gh-pages branch
# The website pulls from our gh-pages branch to build itself.
# Christopher Choy 2017

DIR=/path/to/your/local/github/repo/folder/

cd $DIR/

# Check for uncommitted changes to the repository
if [[ $(git status -s) ]]
then
    echo "The working directory is dirty. Please commit any pending changes."
    exit 1;
fi

# Pull the gh-pages branch
git pull

# Delete the old publication of the website
rm -rf public
mkdir public
git worktree prune
rm -rf .git/worktrees/public/

# Checking out gh-pages branch into public and clean it
git worktree add -B gh-pages public origin/gh-pages
rm -rf public/*

# Generate the website
hugo

# Update the gh-pages branch with new website content
cd public && git add --all && git commit -m "Publishing to gh-pages (publish.sh)"

# Push the updated branch to github
git push origin gh-pages

echo "\n\nPublish Complete. You must update the Custom Domain field in the Repo Settings:"
```

[dns_records]: https://github.com/cchoy96/website_tutorial/blob/master/google%20domains%20dns%20records.png
[github pages]: https://github.com/cchoy96/website_tutorial/blob/master/Github%20Custom%20Domain.png
